services:
  openwebui:
    image: ghcr.io/open-webui/open-webui:main
    container_name: openwebui
    environment:
      OPENAI_API_KEY: ${OPENROUTER_API_KEY}
      OPENAI_API_BASE_URL: ${OPENROUTER_BASE_URL}
      DEFAULT_MODEL: ${OPENWEBUI_DEFAULT_MODEL:-google/gemini-2.0-flash-exp:free}
      ADMIN_EMAIL: ${OPENWEBUI_ADMIN_EMAIL}
      ADMIN_PASSWORD: ${OPENWEBUI_ADMIN_PASSWORD}
    volumes:
      - ${OPENWEBUI_VOLUME:-./volumes/openwebui}:/app/backend/data
    restart: unless-stopped
    networks:
      - traefik-net
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.openwebui.rule=Host(`webui.${DOMAIN:-localhost}`)"
      - "traefik.http.routers.openwebui.entrypoints=web"
      - "traefik.http.services.openwebui.loadbalancer.server.port=8080"
